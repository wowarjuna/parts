angular.module("headNavigation",["ngRoute"]);angular.module("headNavigation").component("headNavigation",{templateUrl:"/Scripts/front/head-navigation.html",controller:["$scope","$routeParams","$location",function(n){n.menu=[{path:"/home",text:"Home"},{path:"/search",text:"Search"},{path:"/stores",text:"Stores"}];n.path="/home";n.$on("$routeChangeStart",function(t,i){n.path=i.$$route.originalPath=="/detail/:id/:modelNo/:name"?"/search":i.$$route.originalPath})}]});angular.module("home",["ngRoute"]);angular.module("home").component("home",{templateUrl:"/Scripts/front/home.html",controller:["$routeParams",function(){}]});angular.module("homeSearch",["ngRoute","reference","query"]);angular.module("homeSearch").component("homeSearch",{templateUrl:function(){return"/Scripts/front/home-search.html?v="+$.now()},controller:["$scope","$routeParams","$location","reference","query",function(n,t,i,r,u){var f=this;n.text="";n.year="-1";r.query({},function(t){n.brands=t.brands;n.brand="-1";n.categories=t.categories;n.category="-1";n.areas=t.areas;n.models=["-- select model --"];n.model="-- select model --";n.area="-- select area --"});n.navigateToSearch=function(){u.filters={text:n.text,category:n.category,brand:n.brand,model:n.model,area:n.area,year:n.year};i.path("/search")};n.onBrandChanged=function(){n.models=_.find(n.brands,{d:parseInt(n.brand)}).m}}]});angular.module("search",["ngRoute"]);angular.module("query",[]);angular.module("search").component("search",{templateUrl:function(){return"/Scripts/front/search.html?v"+$.now()},controller:["$routeParams",function(){}]});angular.module("query").factory("query",function(n,t){var i={};return i.results=null,i.filters=null,i.query=function(r){i.filters=r;t.get("/Search/Query/"+r.page+"/"+r.category+"/"+r.brand+"/"+(r.model!=""?r.model:"model")+"/"+r.year+"/"+(r.area!=""?r.area:"all")+"/"+(r.text!=""?r.text:"criteria")+"/"+$.now()).then(function(t){i.results=t;n.$broadcast("query-success",{result:t})})},i.get=function(i){t.get("/Search/Get/"+i+"/"+$.now()).then(function(t){n.$broadcast("detail-success",{result:t})})},i});angular.module("reference",["ngResource"]);angular.module("reference").factory("reference",["$resource",function(n){return n("/Scripts/front/references.json?v=1",{},{query:{method:"GET",isArray:!1}})}]);angular.module("refineSearch",["ngRoute","query","reference"]);angular.module("refineSearch").component("refineSearch",{templateUrl:function(){return"/Scripts/front/refine-search.html?v="+$.now()},controller:["$scope","$routeParams","query","reference",function(n,t,i,r){var u=this;n.text=i.filters!=null?i.filters.text:"";n.brand=i.filters!=null&&typeof i.filters.brand!="undefined"?i.filters.brand:"-1";n.category=i.filters!=null&&typeof i.filters.category!="undefined"?i.filters.category:"-1";n.model=i.filters!=null&&typeof i.filters.model!="undefined"?i.filters.model:"-1";n.area=i.filters!=null&&typeof i.filters.area!="undefined"?i.filters.area:"-- select area --";n.year=i.filters!=null&&typeof i.filters.year!="undefined"?i.filters.year:"-1";n.validCategory=!0;n.validBrand=!0;n.validModel=!0;r.query({},function(t){n.categories=t.categories;n.brands=t.brands;typeof n.brand!="undefined"&&n.brand!="-1"&&(n.models=_.find(n.brands,{d:parseInt(n.brand)}).m,n.model=i.filters.model);n.areas=t.areas;(n.category!="-1"||typeof n.text!="undefined"&&n.text!="")&&n.search()});n.search=function(){n.category=="-1"?n.validCategory=!1:n.brand=="-1"?(n.validBrand=!1,n.validCategory=!0):n.model==""?(n.validModel=!1,n.validCategory=!0,n.validBrand=!0):(n.validCategory=!0,n.validBrand=!0,n.validModel=!0,i.query({page:1,category:n.category,brand:n.brand,model:typeof n.model!="undefined"&&n.model!=-1?n.model:"",year:typeof n.year!="undefined"?n.year:-1,area:typeof n.area!="undefined"&&n.area!="-- select area --"?n.area:"",text:typeof n.text!="undefined"?n.text:""}))};n.onBrandChanged=function(){n.models=_.find(n.brands,{d:parseInt(n.brand)}).m}}]});angular.module("results",["ngRoute","query","angularUtils.directives.dirPagination"]);angular.module("results").component("results",{templateUrl:function(){return"/Scripts/front/results.html?v="+$.now()},controller:["$routeParams","$rootScope","$scope","$location","query",function(n,t,i,r,u){i.noRecords=!1;u.results!=null&&(i.results=u.results.data.pager.items);t.$on("query-success",function(n,t){i.results=t.result.data.pager.items;t.result.data.pager.count!=0?(i.count=t.result.data.pager.count,i.pagination.current=t.result.data.pager.page,i.noRecords=!1):(i.count=0,i.pagination.current=1,i.noRecords=!0)});i.navigateToDetail=function(n,t,i){r.path("/detail/"+n+"/"+t+"/"+i)};i.pagination={current:1};i.pageChanged=function(n){u.query({page:n,category:u.filters.category,brand:u.filters.brand,model:u.filters.model,year:u.filters.year,area:u.filters.area,text:u.filters.text})};i.count=0}]});angular.module("detail",["ngRoute","query"]);angular.module("detail").component("detail",{templateUrl:function(){return"/Scripts/front/detail.html?v="+$.now()},controller:["$scope","$rootScope","$routeParams","query",function(n,t,i,r){var u=this;u._galleryCount=0;r.get(i.id);t.$on("detail-success",function(t,i){var r=i.result.data;n.id=r.id;n.name=r.itemName;n.description=r.description;n.images=r.images.length!=0?r.images:[{id:-1,name:"no-image-available.png"}];n.phone=r.phone!=null?r.phone.split(","):"No phone number";n.address=r.address!=null?r.address:"No address sss fsdf dsffsd fsd fsf dd fsdf ssd fdsf";n.brand=r.brandName;n.partNo=r.partNo;n.model=r.modelName;n.supplier=r.supplierName});n.galleryInit=function(){if(u._galleryCount++,u._galleryCount==n.images.length*2){var t=new Swiper(".gallery-container",{nextButton:".swiper-button-next",prevButton:".swiper-button-prev",spaceBetween:10}),i=new Swiper(".gallery-thumbs",{spaceBetween:10,centeredSlides:!0,slidesPerView:"auto",touchRatio:.2,slideToClickedSlide:!0});t.params.control=i;i.params.control=t}}}]});angular.module("storeService",[]);angular.module("storeService").factory("storeService",function(n,t){var i={};return i.results=null,i.list=function(){t.get("/home/stores/"+$.now()).then(function(t){i.results=t;n.$broadcast("list-success",{result:t})})},i});angular.module("store",["ngRoute","storeService"]);angular.module("store").component("store",{templateUrl:function(){return"/Scripts/front/store.html?v="+$.now()},controller:["$scope","$rootScope","$routeParams","storeService",function(n,t,i,r){var u=this;r.list();t.$on("list-success",function(t,i){n.results=i.result.data})}]});angular.module("navigation",["ngRoute"]);angular.module("navigation").component("navigation",{templateUrl:"/Scripts/front/navigation.html",controller:["$scope","$routeParams","$location",function(n){n.show=!1;n.text="";n.$on("$routeChangeStart",function(t,i){i.$$route.originalPath=="/search"?(n.text="Search",n.show=!0):i.$$route.originalPath=="/stores"?(n.text="Stores",n.show=!0):n.show=!1})}]});